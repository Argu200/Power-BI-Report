<script type="text/javascript">
  $(document).ready(function () {

    $.get("/api/embed", function (data) {

      var accessToken = data.EmbedToken.Token;
      var embedUrl = data.EmbedUrl;
      var embedReportId = data.Id;

      var models = window['powerbi-client'].models;

      var config = {
        type: 'report',
        tokenType: models.TokenType.Embed,
        accessToken: accessToken,
        embedUrl: embedUrl,
        id: embedReportId,
        permissions: models.Permissions.All,
        settings: {
          bars: {
            actionBar: {
              visible: false
            }
          }
        }
      };

      var reportContainer = document.getElementById("reportContainer");
      powerbi.embed(reportContainer, config);
    });

  });
</script>
